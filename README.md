프로젝트 동기

개인적으로 유리기판 관련 산업과 종목에 큰 관심이 있어 이를 기반으로 투자를 직접 해보고 산업 조사도 했었습니다. 비록 현재 실제로 존재하는 유리기판 산업지수나 관련 옵션 상품은 없지만, 수업 시간에 배운 지식들을 바탕으로 직접 해당 산업의 지수를 구성하고, 이를 기초자산으로 하는 옵션 상품을 이론적으로 설계해 보고자 했습니다. Black-Scholes을 중심으로 수업에서 다룬 내용을 실제 시장 데이터에 적용해봄으로써 수학적 모델이 금융 시장에서 어떻게 활용될 수 있는지를 코드로 직접 구성해보고 싶었습니다. 실제로 있는 지수는 아니어서 시장 데이터를 적극적으로 활용하는 것에는 한계가 있었지만 여러 가정과 실험을 통해 수업 내용을 구현해보았습니다. 이에 더불어 간략하지만 기계학습과응용 시간에 머신러닝을 사용했었던 것에 흥미를 느꼈었어서 딥러닝으로 예측을 해보고 이를 BS와 비교해는 부분도 추가해보았습니다.

프로젝트 개요

이 시뮬레이션은 유리기판 산업에 속한 종목들로 구성된 ‘지수’를 기초자산으로 삼고, 이를 바탕으로 Black-Scholes 이론에 기반한 옵션 가격, Greeks 계산, 델타 헷징 전략, 딥러닝 근사 모델까지 하나의 일관된 흐름으로 구성한 옵션 트레이딩 모델링 실험입니다.

전체 시뮬레이션 개요

목표:

* 유리기판 산업 지수를 구성하고, 이를 기초자산으로 삼아 옵션 가격과 리스크 지표(Greeks)를 분석하며,
* 델타 헷징 전략을 통해 수익·손실 구조를 검토하고,
* 딥러닝으로 Black-Scholes 가격을 근사할 수 있는지 테스트하는 것

1. 지수(Index) 구성 및 데이터 수집

세팅:
* 사용된 종목: 10개
선정 기준 : 제가 개인적으로 유리기판 관련주를 조사하고 투자를 하면서 관심을 가지고 중요하다고 생각했던 10개의 유리기판 회사를 선정해보았습니다. 다음 10개의 회사들이 현재 유리기판이라는 테마에서 주도적인 가격 우상향 및 유리기판 기술력을 가지고 있다고 판단하여 다음 10개 기업을 지수를 만드는 부분에 사용하고자 선정하였습니다.

기업 개요
1. 삼성전기 (Samsung Electro‑Mechanics)
    * MLCC, 인쇄회로기판, 카메라 모듈 등 전자부품 제조.
    * 전자기판 분야 기술 보유
2. KCC글라스 (KCC Corporation)
    * 유리창, 바닥재, 페인트 등 건축자재 대표 기업.
    * 광학 및 건축용 유리, 유리기판 관련 사업 포함
3. 한국유리 (한 유리 업체)
    * 자동차용/건축 유리, 특수유리 생산.
    * 유리기판의 소재 관련 기업으로 분류 가능.
4. SGC에너지
    * 에너지/유리 제조를 병행하는 업체.
    * 태양광? 여기에선 **IGU(단열유리)**나 특수유리 사업 포함.
5. 이오테크닉스 (EO Technics)
    * LCD/TFT, 유리기판 세정·검사 장비 제조.
    * 유리기판 전용 장비 전문 기업.
6. 주성엔지니어링
    * 반도체·디스플레이 장비 및 필터 제작.
    * 기판 장비 영역에서 디스플레이 유리기판 관련 기술 보유.
7. 기가비스 (GigaVis)
    * 비전 검사장비 & 세정장비 개발.
    * 디스플레이·유리기판 검사 및 세정 솔루션 제공.
8. 켐트로닉스 (Chemtronics)
    * 화학·세정 장비 중심.
    * 세정 공정 장비 중 유리기판 산업으로 확장 가능.
9. 와이씨켐 (YC Chem)
    * 공정용 화학 소재 제조 기업.
    * 반도체/디스플레이용 세정·부식제 제공.
10. 필옵틱스 (Philoptics)
    * 고정밀 광학용 렌즈 및 모듈.
    * 렌즈+유리기판 정밀 광학 가공 기반.

* 데이터 출처: Yahoo Finance (yfinance), 시가총액은 pykrx를 통해 조회
* 기간: 최근 1년치 데이터 (365일)
* 가중 방식: 시가총액 가중 평균 방식 → 각 종목의 시가총액 비중만큼 반영
가정:
* 구성 종목이 유리기판 산업을 대표한다고 가정
* 정규화된 지수는 100으로 시작 (상대 지수로 해석)

2. 옵션 가격 계산 및 시나리오 분석
사용 모델:
* Black-Scholes Call Option Pricing Formula
세팅:
* Risk-free rate: 3.5%
* Volatility (σ): 최근 21일 수익률 기준 실현변동성 * √252 → 연율화
1. returns = index.pct_change()
    * 유리기판 산업지수(index)의 일간 수익률 (일별 log return이 아님) 을 계산합니다.
2. rolling(21).std()
    * 최근 21일간(=약 1개월)의 이동 표준편차를 계산합니다.
    * 이는 단기 구간에서 수익률이 얼마나 흔들렸는지를 측정한 것입니다.
3. * np.sqrt(252)
    * 연율화를 위해, 일일 표준편차에 √252를 곱합니다.
    * 이는 보통 한 해에 252거래일이 있다는 가정에 기반하며, annualized realized volatility를 의미합니다.
4. realized_vol.iloc[-1]
    * 가장 최신 날짜 기준의 실현 변동성만을 추출해서 옵션 가격 계산에 사용합니다.

* 행사가 (K): ATM 기준 S₀ ± 10% → 총 3개
* 만기 (T): 30, 60, 90일 → 총 3개
가정:
* 기초자산은 연속적이고 로그정규분포를 따르는 Brownian Motion
* 무배당, 무거래비용, 연속적 헷징 가능
* 금리와 변동성은 고정 (r, σ 상수)

3. Greeks (델타, 감마, 세타) 계산
계산된 Greeks:
* Δ (Delta), Γ (Gamma), Θ (Theta)
* 기준: ATM 수준에서의 Greeks (S₀ = K, T = 60일)

세팅:
* 지수 수준 S를 60~130까지 변화시키며 각 Greeks 측정

4. 델타 헷징 시뮬레이션
전략:
* 초기 델타만큼 주식 매수 또는 매도 + 캐시 포지션 보유
* 매일 지수가 바뀔 때마다 델타 업데이트 → 매일 리밸런싱
* 마지막에는 전체 포트폴리오 가치 – 옵션 가치 = PnL 계산
세팅:
* T = 60일 기준으로 시뮬레이션 (252일 중 앞 60일)
* S₀ = 현재 지수 수준 (지수의 마지막 값)
* σ = 최근 추정값
* 리밸런싱: 매일 1회
가정:
* 매일 헷징 가능 (거래비용 없음)
* 이자율은 캐시에 적용, 베가는 무시
* 옵션과 주식 간 스프레드 및 슬리피지 없음

5. 딥러닝 모델을 통한 BS 가격 근사
목표:
* Black-Scholes 이론가를 실제 데이터 기반으로 학습
* 향후 시장에서 빠른 예측 모델로 활용 가능성 테스트
데이터:
* Feature: [S, K, T, r, σ]
* Label: BS 가격
* 샘플 수: 약 2000개 이상 (1년치 × 3개 만기 조합)
모델 구조:
* 입력층: 5개 변수
* 은닉층: Dense 64 → Dense 64 → 출력층(1)
* 활성화 함수: ReLU
* Optimizer: Adam, 손실함수: MSE
* Epochs: 10, Batch size: 128
* 모델은 훈련을 통해 𝑆 , 𝐾 , 𝑇 , 𝑟 , 𝜎→ 옵션 가격 간의 비선형 관계를 학습한다. 이때 모델은 기존의 복잡한 수식 없이도, 입력 변수들이 변경되었을 때 옵션 가격이 어떻게 변화할지를 통계적으로 추론

<img width="649" alt="스크린샷 2025-06-23 오전 5 09 55" src="https://github.com/user-attachments/assets/d4d77d21-6e41-4cab-bfda-0b9fed4a01f1" />
<img width="918" alt="스크린샷 2025-06-23 오전 5 10 09" src="https://github.com/user-attachments/assets/5cac9d0d-312c-4815-a39c-b29fd8513040" />
<img width="455" alt="스크린샷 2025-06-23 오전 5 10 31" src="https://github.com/user-attachments/assets/ff327700-1665-478a-9417-08413a2e5158" />


시뮬레이션 결과 분석

1. 옵션 포지션 손익 분석 (PnL[Profit and Loss] vs Index Level)
그래프 설명:
* 서로 다른 만기 T (30일, 60일, 90일)과 행사가격 K (79, 88, 96)를 설정하고, 지수 변화에 따른 옵션 포지션의 PnL을 시뮬레이션했습니다.
* X축은 지수 수준 (Index Level), Y축은 옵션 수익/손실 (Profit / Loss)
해석:
* K=88은 ATM (At-the-Money) 상태로, 지수 변화에 가장 민감한 형태. 이 근처에서 PnL 곡선이 가장 가파르게 변화합니다.
* K=79는 Deep ITM (In-the-Money)으로, 초기 프리미엄이 크고 수익이 선형적으로 증가합니다. 이익 가능성은 크지만 초기 비용도 큽니다.
* K=96은 OTM (Out-of-the-Money)으로, 지수가 많이 상승하지 않으면 수익이 나지 않습니다. 대신 초기 비용이 작습니다.
* T가 길어질수록 (30 → 90일) 손익 곡선이 더 완만해지며, 시간가치로 인해 손실이 덜 급격하게 나타납니다.

2. Greeks 분석 (Delta, Gamma, Theta vs Index Level)
Delt
* ∂C/∂S: 기초자산이 1단위 움직일 때 옵션 가격이 얼마나 변하는가
* ATM 부근 (Index ≈ 88)에서 가장 빠르게 증가
* ITM → 1, OTM → 0
Gamma
* ∂²C/∂S²: 델타의 민감도
* ATM에서 가장 큼 → 이 구간에서 헷징 오차가 가장 민감함
* 포트폴리오 리밸런싱이 가장 자주 필요함
Theta
* ∂C/∂t: 시간가치 감소율
* 역시 ATM에서 가장 음의 값이 큼
* 시간이 지날수록 프리미엄이 가장 빨리 소멸됨

3. 델타 헷징 시뮬레이션 결과 (Delta Hedging PnL)
설정: 옵션 만기 T = 60일, ATM 콜옵션 기준
해석:
* 첫날 옵션을 매도하고 델타만큼 주식을 매수하여 헷징 시작
* 지수가 매일 바뀔 때마다 포지션을 재조정함
* 초반 30일: 우상향 → 헷징 전략이 수익 실현에 기여
* 중반 이후: 큰 손실 발생 → 지수 급등락 시 델타 변화에 따라 헷징 손실 발생
* 말미: 급격한 회복 → 옵션 만기 근처에 정확한 델타 맞춤으로 포지션 회복
* 결론: 델타 헷징은 효과적일 수 있으나, 시장 급변 시 단기 오차가 크게 발생할 수 있음

4. 딥러닝 모델을 통한 옵션 가격 근사
훈련 데이터: 현실 지수 기반 데이터 (유리기판 산업지수), 다양한 T, S, σ 기반 모델 성능:
* MSE = 5.2264 → 평균 제곱 오차 기준, 오차는 꽤 있음
* 예측값과 실제값이 대체로 비슷하지만 일부 고가 옵션에서 예측 과소/과대 발생
의미 및 개선점:
* 간단한 모델로도 Black-Scholes 근사 가능
* 그러나 실제 지수 기반이라 시장 노이즈가 많고, 불완전한 변수로 인해 정확도는 제한적
* 성능 개선을 위해선:
    * 더 깊은 NN 구조
    * 입력변수 정규화
    * implied vol 사용
    * 오차 기준선 (예: 가격대별 RMSE) 검토 필요

시뮬레이션의 한계점

1. 지수 구성의 제한성과 대표성 부족 → 산업 지표의 신뢰성 한계
* 유리기판 산업을 대표한다고 설정한 10개 상장 종목은 실제 시장 전체를 완전하게 포괄하지 못하며, 특정 기업(예: 삼성전기, 이오테크닉스 등)의 비중이 과도하게 클 가능성이 있음.
* 시가총액 가중 평균으로 구성된 산업 지수는 특정 종목의 단기 주가 급등·급락에 민감하게 반응할 수 있고, 전체 산업의 흐름보다 개별 이슈에 영향을 받을 수 있음.
* 주가 외에 공급망 리스크, 기술변화 주기, 해외 고객 매출 비중 등 산업의 구조적 특성이 반영되지 않음.

2. BS 모형의 이상적 가정 적용 → 현실 적합성 떨어짐
* Black-Scholes 옵션 가격 공식은 상수 금리, 상수 변동성, 완전 시장, 배당 없음 등의 전제가 필요하지만, 실제 유리기판 산업은 수요 변동성, 기술 경쟁, 환율 민감도 등으로 인해 이 가정과 괴리됨.
* 옵션의 시간가치(decay)와 감마 변화가 급격한 구간(ATM 부근)에서는 가격 민감도가 매우 커지는데, 해당 산업에서는 이러한 민감도가 실제 트레이딩에 높은 리스크로 작용할 수 있음.
* 실현 변동성(realized volatility)을 사용하였고, 시장에서 실제로 거래되는 옵션들은 암묵적 변동성(implied volatility)에 기반하므로 가격 괴리가 발생함.

3. 델타 헷징 전략의 수익 구조 불안정 → 리스크 관리 어려움
* 델타 헷징 PnL 결과에서 보인 바와 같이, 일정 구간에서는 빠르게 손실이 커지다가 다시 회복되는 패턴이 나타남. 이는 유리기판 지수가 단기간에 크게 이동하는 경향을 가짐을 시사.
* 변동성 클러스터링 현상이나 외생적 충격(예: 소재 규제, 반도체 업황 변동 등)에 따라 지수가 비선형적으로 움직일 경우, 정적 델타 헷징 전략은 손실을 키우는 구조가 됨.
* 실제 옵션 운용 시에는 감마 헷지, 베가 헷지 등 다차원적인 헷징 전략이 요구되며, 본 실험에서는 이 부분이 구현되지 않음.

4. 딥러닝 근사 정확도 미흡 → 고가 영역 설명력 부족
* BS 옵션 가격을 예측하기 위한 딥러닝 모델은 MSE 기준으로 전체적으로는 적절한 근사를 보였으나, 고가 옵션 구간에서는 오차가 커지고 분산도 증가하는 경향이 있음.
* 입력 변수(S, K, T, r, σ)만으로는 유리기판 산업지수의 이상 변동성 또는 비정규성을 설명하기 어려우며, 이는 모델의 설명력 한계로 이어짐.
* 외생 변수(예: 글로벌 실리콘 웨이퍼 가격, 주요 고객사 CAPEX 변화 등)를 추가하거나, 비정형 데이터 기반 분석(뉴스, 특허, 정책 등)이 필요할 수 있음.


유리기판 산업에 대한 해석과 인사이트

1. 산업 변동성이 높다 → 옵션 가격이 의미 있게 형성됨
* 1년치 실현변동성(realized volatility)을 계산했을 때, 연환산 기준으로 꽤 높은 값이 나왔고, 이를 기반으로 계산된 옵션 가격도 상당히 높았습니다.
* 이는 유리기판 산업이 기술 변화·경기 사이클·수요 충격에 민감한 고변동 산업이라는 것을 의미합니다.
* 투자자 입장에선 이 산업에 대해 옵션 헤지 수요가 실질적으로 존재할 수 있습니다 (예: 실리콘 가격 변동, 반도체 업황 영향 등).
2. ATM 옵션의 감마, 세타 민감도가 매우 높음 → 리스크 관리 중요
* ATM 영역에서 감마와 세타가 극대화되어 있었고, 이는 지수 수준이 현재 수준(S₀) 근처일 때, 시장이 옵션 가격에 매우 민감하게 반응한다는 뜻입니다.
* 이로 인해 시장 참여자들은 옵션을 보유할 경우, 매우 민감한 리밸런싱이 요구되고, 이는 기관이나 헤지펀드에서 파생상품 운용 시 주요 리스크 요인이 됩니다.
3. 델타 헷징의 수익성과 리스크 → 불안정한 시장 구조
* 델타 헷징 PnL이 중간에 큰 손실을 보였다가 회복하는 모습을 보여주었는데, 이는 유리기판 산업지수가 짧은 시간에 큰 폭으로 이동한 시점이 존재함을 시사합니다.
* 해당 산업 내 특정 기업(예: 삼성전기, 이오테크닉스 등)의 개별 호재·악재에 의한 지수 급등락 가능성이 높고, 따라서 시장 안정성이 낮은 측면이 있습니다.
* 결국 테마주의 성격을 어느 정도 가지고 있기 때문에 조심해야할 필요가 있습니다
4. 딥러닝 모델 근사 오차 존재 → 구조적 설명력 부족
* 옵션 가격을 학습한 딥러닝 모델이 일정 수준에서는 잘 맞았지만 고가 영역에서는 예측력이 떨어졌습니다.
* 이는 단순한 변수(S, K, T, σ, r)로는 유리기판 산업지수의 움직임을 정확히 설명하기 어렵다는 한계를 시사합니다.
* 이 산업의 특수성(소수 종목에 대한 집중, 기술 민감성, 해외 매출 비중 등)을 고려한 팩터 기반 분석 도입이 필요해 보입니다.

